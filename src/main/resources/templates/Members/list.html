<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head lang="en" th:include="common/header :: header"></head>
<body>
<!-- Navigation -->
<nav th:include="common/navbar :: navbar" class="navbar navbar-expand-lg navbar-dark fixed-top" >
</nav>
<!-- Navigation -->




<!-- Page Content -->
<div class="container-fluid subContainer" sec:authorize="hasAuthority('USER_R') and hasRole('ROLE_ADMIN')">
  <div class="card subCard">


    <!--Search Information Tool-->
    <div class="card-body subcard-body pb-0 pt-2">
        <form class="row row-cols-auto" th:object="${pssSearch}" th:action="@{/members/list}" method="post" name="searchformmanageUsers" id="searchformmanageUsers">
            <div class="col pe-2">
                <select class="form-control" th:field="*{searchComid}" id="searchComid" name="searchComid">
                    <option value="-1">-All Company & Office-</option>
                    <option th:each="CompanyType : ${CompanyType}" th:value="${CompanyType.CompanyID}" th:utext="${CompanyType.comName +' '+ CompanyType.comBranch}" th:selected="${CompanyType.CompanyID==filterForm.searchComid}">
                    </option>
                </select>
            </div>
          <div class="col pe-2">
            <input type="text" class="form-control" th:field="*{searchName}" id="searchName" name="searchName" placeholder="Search Keyword" th:value="${filterForm.searchName}">
          </div>   
          <div class="col pe-2">
            <button type="submit" class="btn btn-outline-secondary mb-2 btn-sm"><i class="fa fa-search"></i> Search</button> 
            <button type="button" class="btn btn-outline-primary mb-2 btn-sm" id='manageUsersinputBtn' sec:authorize="hasAuthority('USER_A') and hasRole('ROLE_ADMIN')"><i class="fa fa-plus"></i> Add</button>
          </div>  
                  
        </form>
    </div>
<!--Search Information Tool-->
  </div>
<!--Listing Log-->
    <div class="table-responsive " >

      <table id="manageuserslistTable" class="table  table-bordered mb-0 table-hover">
          <thead class="commonThead">
              <tr>
                  <th>User ID</th>
                  <th>First Name</th>
                  <th>Last Name</th>
                  <th>Position</th>
                  <th>Phone</th> 
                  <th>Email</th> 
                  <th>Branch</th>
                  <th>Admin</th>  
                  <th>HWY LOG</th>
                  <th>Signature Log</th>
                  <th>HWY-E LOG</th>
                  <th>LastUpdated</th>
              </tr>
            
          </thead>
          <tbody>
          <tr th:each="results : ${results}" sec:authorize="hasAuthority('USER_R') and hasRole('ROLE_ADMIN')">
              <td ><a href="#" th:onclick=loadmanageUsersdetail([[${results.UserID}]]); th:text="${results.UserID}">1</a></td>
              <td th:text="${results.FirstName}">First Name</td>
              <td th:text="${results.LastName}">Last Name</td>
              <td th:text="${results.Position}">Position</td>
              <td th:text="${results.PhoneNumber}">Phone</td>
              <td th:text="${results.Email}">Email</td>
              <td th:text="${results.BranchName}">Branch</td>
              <td><i class="fa fa-check text-success"  th:if="${results.Administrator == true}"></i></td>
              <td th:text="${results.hwylogAuth}"></td>
              <td th:text="${results.signaturelogAuth}"></td>
              <td th:text="${results.hwyelogAuth}"></td>
              <td th:text="${results.lastUpdated}">04/13/2021 12:00:00</td>
          </tr>

        </tbody>                                        
      </table>


        <!--Paging Log-->
        <div class="bbsBottom" th:if="${results.totalPages gt 0}" sec:authorize="hasAuthority('USER_R') and hasRole('ROLE_ADMIN')">
            <ul class="pagination pagination-md justify-content-center " style="margin:10px 0" th:with="start=${T(Math).floor(results.number/10)*10 + 1},
                    last=(${start + 9 < results.totalPages ? start + 9 : results.totalPages})">

                <li class="page-item">
                    <a class="page-link" th:href="@{/members/list?page=1&searchComid={searchComid}&searchName={searchName}(searchComid=${filterForm.searchComid},searchName=${filterForm.searchName})}" aria-label="First">
                        <span aria-hidden="true">First</span>
                    </a>
                </li>
                <li class="page-item" th:classappend="${results.number eq 0} ? 'disabled'">
                    <a class="page-link" th:href="@{/members/list?page={id}&searchComid={searchComid}&searchName={searchName}(id=${results.number lt 2 ? 1 : results.number},searchComid=${filterForm.searchComid},searchName=${filterForm.searchName})}"><<</a>
                </li>
                <li  th:each="page: ${#numbers.sequence(start, last)}" th:class=" ${page == results.number+1} ? 'page-item active' : 'page-item ' ">
                    <a class="page-link" th:href="@{/members/list?page={id}&searchComid={searchComid}&searchName={searchName}(id=${page},searchComid=${filterForm.searchComid},searchName=${filterForm.searchName})}"
                       th:text="${page}">1</a>

                </li>
                <li class="page-item"  th:classappend="${results.number + 1 eq results.totalPages} ? 'disabled'">
                    <a class="page-link" th:href="@{/members/list?page={id}&searchComid={searchComid}&searchName={searchName}(id=${results.number + 2},searchComid=${filterForm.searchComid},searchName=${filterForm.searchName})}">>></a>
                </li>
                <li class="page-item" >
                    <a class="page-link" th:href="@{/members/list?page={id}&searchComid={searchComid}&searchName={searchName}(id=${results.totalPages},searchComid=${filterForm.searchComid},searchName=${filterForm.searchName})}" aria-label="Last">
                        <span aria-hidden="true">Last</span>
                    </a>
                </li>
            </ul>
        </div>
        <!--Paging Log-->


  </div>      



<!--Listing Log-->




</div>
<!-- Page Content -->

<div lang="en" th:include="common/footer :: footer"></div>
</body>
</html>
<script th:src="@{/js/pss-manageuserscustom.js}"></script><!--Custom js-->
